# Item 03. private 생성자나 열거 타입으로 싱글턴임을 보증하라

- `싱글턴(singleton)`이란 인스턴스를 오직 하나만 생성할 수 있는 클래스를 말합니다.
- 이러한 싱글턴은 클라이언트를 테스트하기 어렵게 만든다는 단점이 존재합니다.
  - 싱글턴 인스턴스를 `mock`으로 구현할 수 없기 때문입니다.

## 방법

- 싱글턴을 만들기 위해 보통 아래 방법을 사용합니다.
- 생성자는 `private`로 감춰둡니다.

### 1. public static final

- 자신의 객체를 `public static final`로 내부적으로 참조하여 해당 필드를 초기화할 때 `private` 생성자가 딱 한번 호출됩니다.
- 이로 인해 전체 시스템에서 하나임이 보장됩니다.
- 장점
  - 해당 클래스가 싱글턴임이 API에 명확하게 드러납니다.
  - 간결한 코드가 장점입니다.

### 2. 정적 팩터리 메서드를 public static 멤버로 제공합니다.

- 해당 객체를 반환하는 정적 팩터리 메서드를 정의하여 항상 같은 객체의 참조를 반환하도록 합니다.
- 장점
  - API를 바꾸지 않고도 싱글턴이 아니게 변경할 수 있습니다.
  - 반환 타입을 유연하게 설정할 수 있는 제네릭 싱글턴 팩터리로 만들 수 있습니다.
  - 정적 팩터리의 메서드 참조를 공급자로 제공할 수 있습니다.
- **위의 장점이 필요하지 않은 경우 public static final 필드 방식을 권장합니다.**

### 3. 원소가 하나인 열거 타입을 선언하는 것입니다.

- 대부분 상황에서는 원소가 하나뿐인 열거 타입이 싱글턴을 만드는 가장 좋은 방법입니다.
- 만들려는 싱글턴이 `Enum` 외의 클래스를 상속해야 한다면 이 방법을 사용할 수 없습니다.
  - 열거 타입이 다른 인터페이스를 구현하도록 선언할 수 없기 때문입니다.