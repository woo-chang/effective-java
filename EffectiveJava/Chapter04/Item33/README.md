# Item 33. 타입 안전 이종 컨테이너를 고려하라

- 제네릭은 컬렉션, 단일 원소 컨테이너 모두 사용된다.
  - 매개변수화되는 대상은 원소가 아닌 컨테이너 자신이다.
  - 컨테이너가 특정되기 때문?
- 일반적인 컬렉션은 매개변수의 개수를 알 수 있지만, 데이터베이스와 같이 하나의 `row`에 여러 개의 `column`을 갖는 컨테이너에도 타입 안성을 보장하는 유연함을 제공하려면?
  - 컨테이너 대신 `키`를 매개변수화한다.
  - 이러한 설계 방식을 `타입 안전 이종 컨테이너 패턴`이라 한다.
- `Favorites`의 제약사항
  - 로 타입을 넘기면 타입 안정성이 깨질수도 있다.
    - 메서드 수정을 통해 대처 가능
  - `List<String>.class` 같은 것이 존재하지 않기에 실체화 불가 타입에는 사용할 수 없다.
    - 이 문제를 해결하기 위한 우회는 존재하지 않는다.
- `Favorites`의 키 값은 비한정적이다. 어떤 값이든 받을 수 있다.
  - 제한하고 싶다면 **한정적 타입 매개변수**나 **한정적 와일드 카드**를 사용한다.

## 정리

- 일반적 제네릭 형태에서는 컨테이너가 다룰 수 있는 타입 매개변수 수가 고정되어 있다.
- 컨테이너 자체가 아닌 키를 타입 매개변수로 바꾸면 제약 없는 타입 안전 이종 컨테이너를 만들 수 있다.
- 이런 식으로 쓰이는 객체를 `타입 토큰`이라고 한다. 직접 구현한 키도 쓸 수 있다.